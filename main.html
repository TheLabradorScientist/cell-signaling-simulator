<!DOCTYPE html>
<head>
   <style>
    #preloader {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: #000000;
        display: flex;
        font-size: 24px;
        font-style: italic;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: #38ffc7;
        z-index: 99;
    }
    #game-canvas {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        justify-content: center;
        align-items: center;
        display: none;
    }
   </style>
</head>
<body>
    <div id="preloader">Loading...</div>
    <canvas id="game-canvas"></canvas>
    <script src="wasm_exec.js"></script>
    <script>
        // Polyfill
        if (!WebAssembly.instantiateStreaming) {
            WebAssembly.instantiateStreaming = async (resp, importObject) => {
            const source = await (await resp).arrayBuffer();
            return await WebAssembly.instantiate(source, importObject);
        };
    }

    const go = new Go();
    WebAssembly.instantiateStreaming(fetch("CSPS.wasm"), go.importObject).then(result => {
        go.run(result.instance);
        document.getElementById("preloader").style.display = "none";
        document.getElementById("game-canvas").style.display = "block";
    });
    </script>
</body>
